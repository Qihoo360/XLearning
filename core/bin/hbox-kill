#!/usr/bin/env bash

set -euo pipefail
[[ ${DEBUG-} != true ]] || set -x

HBOX_HOME="$(cd -- "$(dirname -- "$0")"/.. && pwd)"

# shellcheck source-path=SCRIPTDIR/..
. "$HBOX_HOME/conf/hbox-env.sh"

# Find the java binary
if [[ ${JAVA_HOME-} ]] && [[ -x "${JAVA_HOME}/bin/java" ]]; then
  RUNNER="${JAVA_HOME}/bin/java"
elif hash java >/dev/null; then
  RUNNER=java
else
  echo "[ERROR] JAVA_HOME is not set" >&2
  exit 1
fi

exec "$RUNNER" -cp "$HBOX_CLASSPATH" org.apache.hadoop.yarn.client.cli.ApplicationCLI application -kill "$@"
